import{d as A,r as I,c as F,a as c,n as S,i as l,b as s,t as d,F as f,f as g,h as o,_,W as E,B as P}from"./index-BWVDYC4y.js";const q={key:0,class:"service-badges"},M={key:0,class:"badge badge-free"},L={key:1,class:"badge badge-discount"},T={key:2,class:"badge badge-featured"},W={key:3,class:"badge badge-premium"},$={key:4,class:"badge badge-offer"},N={class:"service-icon"},O={class:"icon-display"},V={class:"service-info"},G={class:"service-category"},H={class:"category-text"},z={key:0,class:"service-description"},K={key:1,class:"service-duration"},U={class:"duration-text"},j={key:2,class:"service-rating"},J={class:"rating-stars"},Q={class:"rating-value"},X={class:"rating-count"},Y={key:3,class:"service-features"},Z={class:"features-list"},x={class:"feature-text"},ee={key:4,class:"service-includes"},se={class:"includes-list"},re={class:"include-text"},te={key:5,class:"service-benefits"},ie={class:"benefits-list"},ae={class:"benefit-text"},ce={key:6,class:"additional-info"},oe={key:0,class:"info-item"},ne={class:"info-value"},le={class:"info-item"},ue={class:"info-value"},de={class:"service-pricing"},ve={key:0,class:"price-free"},pe={key:0,class:"free-condition"},fe={key:1,class:"price-display"},ge={key:0,class:"price-original"},he={class:"price-current"},me={key:2,class:"savings"},ye={key:3,class:"special-offer"},Se={class:"offer-text"},be={class:"service-actions"},ke=["disabled"],we={key:0,class:"btn-icon"},Re={key:1,class:"btn-icon loading"},Be={class:"btn-text"},Ce=A({__name:"ServiceCard",props:{service:{},showBadges:{type:Boolean,default:!0},showDescription:{type:Boolean,default:!0},showDuration:{type:Boolean,default:!0},showRating:{type:Boolean,default:!0},showFeatures:{type:Boolean,default:!0},showIncludes:{type:Boolean,default:!1},showBenefits:{type:Boolean,default:!1},showAdditionalInfo:{type:Boolean,default:!1},maxFeatures:{default:3},maxIncludes:{default:3},maxBenefits:{default:2},allowShare:{type:Boolean,default:!0},variant:{default:"default"}},emits:["bookService","requestService","viewDetails","shareService","showMoreFeatures","showMoreIncludes","serviceClick"],setup(m,{emit:t}){const n=m,r=t,i=I(!1),u=F(()=>n.service.subscription||n.service.warranty||n.service.category==="Premium"||n.service.price>1e5),p=()=>{r("serviceClick",n.service)},b=async()=>{i.value=!0;try{r("bookService",n.service),await new Promise(e=>setTimeout(e,1500))}catch(e){console.error("Error booking service:",e)}finally{i.value=!1}},k=()=>{r("requestService",n.service)},w=()=>{r("viewDetails",n.service)},R=()=>{r("shareService",n.service)},B=()=>{r("showMoreFeatures",n.service)},C=()=>{r("showMoreIncludes",n.service)},D=e=>{const a=n.variant==="compact"?80:150;return e.length>a?e.substring(0,a)+"...":e},h=e=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return(e,a)=>{var y;return o(),c("div",{class:S(["service-card",{"card-featured":e.service.featured,"card-free":e.service.free||e.service.price===0,"card-premium":u.value,"card-booking-required":e.service.bookingRequired}])},[e.showBadges?(o(),c("div",q,[e.service.free||e.service.price===0?(o(),c("span",M," GRATIS ")):e.service.discount&&e.service.discount>0?(o(),c("span",L," -"+d(e.service.discount)+"% ",1)):l("",!0),e.service.featured?(o(),c("span",T," ⭐ Destacado ")):l("",!0),u.value?(o(),c("span",W," 👑 Premium ")):l("",!0),e.service.freeWithPurchase?(o(),c("span",$," 🎁 Gratis con compra ")):l("",!0)])):l("",!0),s("div",N,[s("span",O,d(e.service.icon),1),a[0]||(a[0]=s("div",{class:"icon-background"},null,-1))]),s("div",V,[s("div",G,[s("span",H,d(e.service.category),1)]),s("h3",{class:"service-name",onClick:p},d(e.service.name),1),e.showDescription?(o(),c("p",z,d(D(e.service.description)),1)):l("",!0),e.showDuration?(o(),c("div",K,[a[1]||(a[1]=s("span",{class:"duration-icon"},"⏱️",-1)),s("span",U,d(e.service.duration),1)])):l("",!0),e.showRating?(o(),c("div",j,[s("div",J,[(o(),c(f,null,g(5,v=>s("span",{key:v,class:S(["star",{"star-filled":v<=Math.floor(e.service.rating)}])}," ⭐ ",2)),64))]),s("span",Q,d(e.service.rating.toFixed(1)),1),s("span",X,"("+d(e.service.reviews)+")",1)])):l("",!0),e.showFeatures&&e.service.features.length>0?(o(),c("div",Y,[s("ul",Z,[(o(!0),c(f,null,g(e.service.features.slice(0,e.maxFeatures),v=>(o(),c("li",{key:v,class:"feature-item"},[a[2]||(a[2]=s("span",{class:"feature-icon"},"✓",-1)),s("span",x,d(v),1)]))),128))]),e.service.features.length>e.maxFeatures?(o(),c("button",{key:0,class:"show-more-features",onClick:B}," +"+d(e.service.features.length-e.maxFeatures)+" más ",1)):l("",!0)])):l("",!0),e.showIncludes&&e.service.includes.length>0?(o(),c("div",ee,[a[4]||(a[4]=s("h4",{class:"includes-title"},"Incluye:",-1)),s("ul",se,[(o(!0),c(f,null,g(e.service.includes.slice(0,e.maxIncludes),v=>(o(),c("li",{key:v,class:"include-item"},[a[3]||(a[3]=s("span",{class:"include-icon"},"📋",-1)),s("span",re,d(v),1)]))),128))]),e.service.includes.length>e.maxIncludes?(o(),c("button",{key:0,class:"show-more-includes",onClick:C}," Ver todo lo incluido ")):l("",!0)])):l("",!0),e.showBenefits&&e.service.benefits.length>0?(o(),c("div",te,[a[6]||(a[6]=s("h4",{class:"benefits-title"},"Beneficios:",-1)),s("ul",ie,[(o(!0),c(f,null,g(e.service.benefits.slice(0,e.maxBenefits),v=>(o(),c("li",{key:v,class:"benefit-item"},[a[5]||(a[5]=s("span",{class:"benefit-icon"},"🎯",-1)),s("span",ae,d(v),1)]))),128))])])):l("",!0),e.showAdditionalInfo?(o(),c("div",ce,[e.service.coverage?(o(),c("div",oe,[a[7]||(a[7]=s("span",{class:"info-icon"},"📍",-1)),a[8]||(a[8]=s("span",{class:"info-label"},"Cobertura:",-1)),s("span",ne,d(e.service.coverage),1)])):l("",!0),s("div",le,[a[9]||(a[9]=s("span",{class:"info-icon"},"📅",-1)),a[10]||(a[10]=s("span",{class:"info-label"},"Reserva:",-1)),s("span",ue,d(e.service.bookingRequired?"Requerida":"No requerida"),1)])])):l("",!0)]),s("div",de,[e.service.free||e.service.price===0?(o(),c("div",ve,[a[11]||(a[11]=s("span",{class:"free-text"},"GRATIS",-1)),e.service.freeWithPurchase?(o(),c("span",pe," Con compra de lentes ")):l("",!0)])):(o(),c("div",fe,[e.service.discount&&e.service.discount>0?(o(),c("span",ge," $"+d(h(e.service.originalPrice)),1)):l("",!0),s("span",he," $"+d(h(e.service.price)),1)])),e.service.discount&&e.service.discount>0?(o(),c("div",me," Ahorras $"+d(h(e.service.originalPrice-e.service.price)),1)):l("",!0),e.service.freeWithPurchase?(o(),c("div",ye,[a[12]||(a[12]=s("span",{class:"offer-icon"},"🎁",-1)),s("span",Se,d(((y=e.service.pricing)==null?void 0:y.description)||"Gratis con compra"),1)])):l("",!0)]),s("div",be,[e.service.bookingRequired?(o(),c("button",{key:0,class:"btn btn-primary book-service",onClick:b,disabled:i.value},[i.value?(o(),c("span",Re,"⏳")):(o(),c("span",we,"📅")),s("span",Be,d(i.value?"Reservando...":"Reservar Cita"),1)],8,ke)):(o(),c("button",{key:1,class:"btn btn-primary request-service",onClick:k},a[13]||(a[13]=[s("span",{class:"btn-icon"},"💬",-1),s("span",{class:"btn-text"},"Solicitar Servicio",-1)]))),s("button",{class:"btn btn-ghost details-btn",onClick:w},a[14]||(a[14]=[s("span",{class:"btn-icon"},"ℹ️",-1),s("span",{class:"btn-text"},"Más Información",-1)])),e.allowShare?(o(),c("button",{key:2,class:"btn btn-ghost share-btn",onClick:R},a[15]||(a[15]=[s("span",{class:"btn-icon"},"📤",-1),s("span",{class:"btn-text"},"Compartir",-1)]))):l("",!0)])],2)}}}),Ie=_(Ce,[["__scopeId","data-v-26e344b5"]]);class De extends E{constructor(){super()}async getAllServices(){try{return{data:(await P(()=>import("./services-7R_EUogt.js"),[])).default,status:200,message:"Services fetched successfully",success:!0}}catch{throw new Error("Error fetching services")}}async getServicesByCategory(t){return{data:(await this.getAllServices()).data.services.filter(i=>i.category.toLowerCase()===t.toLowerCase()),status:200,message:"Services by category fetched successfully",success:!0}}async getServiceById(t){const r=(await this.getAllServices()).data.services.find(i=>i.id===t);return{data:r||null,status:r?200:404,message:r?"Service found":"Service not found",success:!!r}}async searchServices(t){let r=[...(await this.getAllServices()).data.services];return t.category&&(r=r.filter(i=>i.category.toLowerCase().includes(t.category.toLowerCase()))),t.priceMin!==void 0&&(r=r.filter(i=>i.price>=t.priceMin)),t.priceMax!==void 0&&(r=r.filter(i=>i.price<=t.priceMax)),t.free!==void 0&&(r=r.filter(i=>t.free?i.price===0||i.free:i.price>0)),t.featured!==void 0&&(r=r.filter(i=>i.featured===t.featured)),t.bookingRequired!==void 0&&(r=r.filter(i=>i.bookingRequired===t.bookingRequired)),t.sortBy&&r.sort((i,u)=>{let p=0;switch(t.sortBy){case"price":p=i.price-u.price;break;case"rating":p=i.rating-u.rating;break;case"name":p=i.name.localeCompare(u.name);break;case"popularity":p=i.reviews-u.reviews;break}return t.sortOrder==="desc"?-p:p}),{data:r,status:200,message:"Services search completed",success:!0}}async getPopularServices(){const t=await this.getAllServices(),{popularServices:n,services:r}=t.data;return{data:r.filter(u=>n.includes(u.id)),status:200,message:"Popular services fetched successfully",success:!0}}async getPremiumServices(){const t=await this.getAllServices(),{premiumServices:n,services:r}=t.data;return{data:r.filter(u=>n.includes(u.id)),status:200,message:"Premium services fetched successfully",success:!0}}async getFreeServices(){const t=await this.getAllServices(),{freeServices:n,services:r}=t.data;return{data:r.filter(u=>n.includes(u.id)||u.free||u.price===0),status:200,message:"Free services fetched successfully",success:!0}}async getFeaturedServices(){return{data:(await this.getAllServices()).data.services.filter(r=>r.featured),status:200,message:"Featured services fetched successfully",success:!0}}async getWorkingHours(){return{data:(await this.getAllServices()).data.workingHours,status:200,message:"Working hours fetched successfully",success:!0}}async getEmergencyService(){return{data:(await this.getAllServices()).data.emergencyService,status:200,message:"Emergency service info fetched successfully",success:!0}}async bookService(t){try{if(!(await this.getServiceById(t.serviceId)).data)return{data:null,status:404,message:"Service not found",success:!1};const r=`BK-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i=`CONF-${Math.random().toString(36).substr(2,8).toUpperCase()}`;return console.log("Booking details:",{...t,bookingId:r,confirmationNumber:i}),{data:{bookingId:r,confirmationNumber:i},status:201,message:"Service booked successfully",success:!0}}catch{throw new Error("Error booking service")}}async cancelBooking(t){try{return console.log("Cancelling booking:",t),{data:!0,status:200,message:"Booking cancelled successfully",success:!0}}catch{throw new Error("Error cancelling booking")}}async getServiceCategories(){const t=await this.getAllServices();return{data:[...new Set(t.data.services.map(r=>r.category))],status:200,message:"Service categories fetched successfully",success:!0}}async checkAvailability(t,n){try{const u=new Date(`${t} ${n}`)>new Date;return{data:u,status:200,message:u?"Time slot available":"Time slot not available",success:!0}}catch{throw new Error("Error checking availability")}}async getAvailableTimeSlots(t){try{const n=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"],i=new Date(t).getDay();return{data:i===6?n.filter(p=>p<="16:00"):i===0?[]:n,status:200,message:"Available time slots fetched successfully",success:!0}}catch{throw new Error("Error fetching available time slots")}}}const Fe=new De;export{Ie as S,Fe as s};
//# sourceMappingURL=servicesService-0KQ6gb3x.js.map
