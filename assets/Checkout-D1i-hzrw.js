import{d as z,u as B,k as F,r as y,c as G,a as d,b as s,n as g,i as _,w as C,s as n,v as m,e as O,J as x,t as l,G as v,F as L,f as j,y as J,h as p,_ as W}from"./index-BWVDYC4y.js";const H={class:"checkout-page"},K={class:"container"},Q={class:"checkout-header"},X={class:"checkout-steps"},Y={class:"checkout-content"},Z={class:"checkout-main"},ss={key:0,class:"checkout-step"},ts={class:"form-row"},es={class:"form-group"},os={class:"form-group"},as={class:"form-row"},ls={class:"form-group"},is={class:"form-group"},ns={class:"form-group"},rs={key:1,class:"checkout-step"},ds={class:"delivery-options"},ps={class:"option-label"},us={class:"option-label"},cs={class:"option-content"},ms={class:"option-header"},vs={class:"option-price"},fs={class:"option-description"},bs={key:0,class:"delivery-address"},ys={class:"form-group"},gs={class:"form-row"},_s={class:"form-group"},ks={class:"form-group"},hs={class:"form-group"},xs={key:2,class:"checkout-step"},Ns={class:"payment-methods"},Cs={class:"option-label"},ws={class:"option-content"},Ps={class:"option-description"},Ss={class:"option-label"},Is={class:"order-notes"},Vs={class:"step-actions"},Ts=["disabled"],qs={key:0,class:"btn-icon"},Es={key:1,class:"btn-icon loading"},Us={class:"btn-text"},Rs={class:"order-summary"},$s={class:"summary-card"},Ds={class:"summary-items"},As={class:"item-image"},Ms=["src","alt"],zs={class:"item-details"},Bs={class:"item-name"},Fs={class:"item-options"},Gs={key:0},Os={key:1},Ls={class:"item-quantity"},js={class:"item-price"},Js={class:"summary-totals"},Ws={class:"total-row"},Hs={class:"total-value"},Ks={key:0,class:"total-row discount"},Qs={class:"total-value"},Xs={class:"total-row"},Ys={class:"total-label"},Zs={class:"total-value"},st={class:"total-row"},tt={class:"total-value"},et={class:"total-row final-total"},ot={class:"total-value"},at=z({__name:"Checkout",setup(lt){const T=J(),{items:w,cartSummary:o,clearCart:q}=B(),{showSuccess:E,showError:k}=F(),u=y(1),h=y(!1),r=y({firstName:"",lastName:"",email:"",phone:"",idNumber:""}),a=y("pickup"),c=y({address:"",city:"Pedraza",department:"Magdalena",notes:""}),f=y("cash"),N=y(""),P=G(()=>{let i=o.value.total;return a.value==="pickup"&&(i-=o.value.shipping),i}),b=i=>new Intl.NumberFormat("es-CO").format(i),S=()=>{V()&&u.value++},I=()=>{u.value--},V=()=>{switch(u.value){case 1:return U();case 2:return R();case 3:return $();default:return!0}},U=()=>{const{firstName:i,lastName:t,email:e,phone:A,idNumber:M}=r.value;return!i.trim()||!t.trim()||!e.trim()||!A.trim()||!M.trim()?(k("Campos requeridos","Por favor completa todos los campos obligatorios"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?!0:(k("Email inv√°lido","Por favor ingresa un email v√°lido"),!1)},R=()=>{if(a.value==="delivery"){const{address:i,city:t,department:e}=c.value;if(!i.trim()||!t.trim()||!e.trim())return k("Direcci√≥n requerida","Por favor completa la informaci√≥n de entrega"),!1}return!0},$=()=>f.value?!0:(k("M√©todo de pago requerido","Por favor selecciona un m√©todo de pago"),!1),D=async()=>{if(V()){h.value=!0;try{await new Promise(t=>setTimeout(t,2e3));const i={id:`ORDER-${Date.now()}`,customer:r.value,delivery:{method:a.value,info:a.value==="delivery"?c.value:null},payment:{method:f.value},items:w.value,totals:{subtotal:o.value.subtotal,discount:o.value.discount,shipping:a.value==="pickup"?0:o.value.shipping,tax:o.value.tax,total:P.value},notes:N.value,timestamp:new Date().toISOString()};console.log("Pedido creado:",i),q(),E("¬°Pedido confirmado!",`Tu pedido ${i.id} ha sido creado exitosamente. Te contactaremos pronto.`),setTimeout(()=>{T.push("/")},3e3)}catch(i){console.error("Error procesando pedido:",i),k("Error","No se pudo procesar tu pedido. Int√©ntalo nuevamente.")}finally{h.value=!1}}};return(i,t)=>(p(),d("div",H,[s("div",K,[s("div",Q,[t[19]||(t[19]=s("h1",{class:"page-title"},[s("span",{class:"title-icon"},"üõçÔ∏è"),s("span",{class:"title-text"},"Finalizar Compra")],-1)),s("div",X,[s("div",{class:g(["step",{active:u.value>=1,completed:u.value>1}])},t[14]||(t[14]=[s("span",{class:"step-number"},"1",-1),s("span",{class:"step-label"},"Informaci√≥n",-1)]),2),t[17]||(t[17]=s("div",{class:"step-divider"},null,-1)),s("div",{class:g(["step",{active:u.value>=2,completed:u.value>2}])},t[15]||(t[15]=[s("span",{class:"step-number"},"2",-1),s("span",{class:"step-label"},"Entrega",-1)]),2),t[18]||(t[18]=s("div",{class:"step-divider"},null,-1)),s("div",{class:g(["step",{active:u.value>=3}])},t[16]||(t[16]=[s("span",{class:"step-number"},"3",-1),s("span",{class:"step-label"},"Pago",-1)]),2)])]),s("div",Y,[s("div",Z,[u.value===1?(p(),d("div",ss,[t[26]||(t[26]=s("h2",{class:"step-title"},"Informaci√≥n de Contacto",-1)),s("form",{onSubmit:C(S,["prevent"]),class:"checkout-form"},[s("div",ts,[s("div",es,[t[20]||(t[20]=s("label",{class:"form-label",for:"firstName"},"Nombre *",-1)),n(s("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=e=>r.value.firstName=e),type:"text",class:"form-input",placeholder:"Tu nombre",required:""},null,512),[[m,r.value.firstName]])]),s("div",os,[t[21]||(t[21]=s("label",{class:"form-label",for:"lastName"},"Apellidos *",-1)),n(s("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=e=>r.value.lastName=e),type:"text",class:"form-input",placeholder:"Tus apellidos",required:""},null,512),[[m,r.value.lastName]])])]),s("div",as,[s("div",ls,[t[22]||(t[22]=s("label",{class:"form-label",for:"email"},"Email *",-1)),n(s("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>r.value.email=e),type:"email",class:"form-input",placeholder:"tu@email.com",required:""},null,512),[[m,r.value.email]])]),s("div",is,[t[23]||(t[23]=s("label",{class:"form-label",for:"phone"},"Tel√©fono *",-1)),n(s("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=e=>r.value.phone=e),type:"tel",class:"form-input",placeholder:"300 123 4567",required:""},null,512),[[m,r.value.phone]])])]),s("div",ns,[t[24]||(t[24]=s("label",{class:"form-label",for:"idNumber"},"C√©dula de Identidad *",-1)),n(s("input",{id:"idNumber","onUpdate:modelValue":t[4]||(t[4]=e=>r.value.idNumber=e),type:"text",class:"form-input",placeholder:"12345678",required:""},null,512),[[m,r.value.idNumber]])]),t[25]||(t[25]=s("div",{class:"step-actions"},[s("button",{type:"submit",class:"btn btn-primary btn-lg"},[s("span",{class:"btn-text"},"Continuar"),s("span",{class:"btn-icon"},"‚Üí")])],-1))],32)])):_("",!0),u.value===2?(p(),d("div",rs,[t[37]||(t[37]=s("h2",{class:"step-title"},"Informaci√≥n de Entrega",-1)),s("form",{onSubmit:C(S,["prevent"]),class:"checkout-form"},[s("div",ds,[s("div",{class:g(["option-card",{selected:a.value==="pickup"}])},[s("label",ps,[n(s("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.value=e),type:"radio",value:"pickup",class:"option-radio"},null,512),[[x,a.value]]),t[27]||(t[27]=O('<div class="option-content" data-v-bd12322e><div class="option-header" data-v-bd12322e><span class="option-icon" data-v-bd12322e>üè™</span><span class="option-title" data-v-bd12322e>Recoger en tienda</span><span class="option-price" data-v-bd12322e>GRATIS</span></div><p class="option-description" data-v-bd12322e> Recoge tu pedido en nuestra √≥ptica. Listo en 2-3 d√≠as h√°biles. </p></div>',1))])],2),s("div",{class:g(["option-card",{selected:a.value==="delivery"}])},[s("label",us,[n(s("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.value=e),type:"radio",value:"delivery",class:"option-radio"},null,512),[[x,a.value]]),s("div",cs,[s("div",ms,[t[28]||(t[28]=s("span",{class:"option-icon"},"üöö",-1)),t[29]||(t[29]=s("span",{class:"option-title"},"Entrega a domicilio",-1)),s("span",vs,l(v(o).shipping===0?"GRATIS":`$${b(v(o).shipping)}`),1)]),s("p",fs," Entrega en tu direcci√≥n. "+l(v(o).shipping===0?"Env√≠o gratis por compra superior a $200,000":"Tiempo estimado: 3-5 d√≠as h√°biles"),1)])])],2)]),a.value==="delivery"?(p(),d("div",bs,[t[34]||(t[34]=s("h3",{class:"address-title"},"Direcci√≥n de Entrega",-1)),s("div",ys,[t[30]||(t[30]=s("label",{class:"form-label",for:"address"},"Direcci√≥n completa *",-1)),n(s("input",{id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>c.value.address=e),type:"text",class:"form-input",placeholder:"Calle 123 #45-67",required:""},null,512),[[m,c.value.address]])]),s("div",gs,[s("div",_s,[t[31]||(t[31]=s("label",{class:"form-label",for:"city"},"Ciudad *",-1)),n(s("input",{id:"city","onUpdate:modelValue":t[8]||(t[8]=e=>c.value.city=e),type:"text",class:"form-input",placeholder:"Pedraza",required:""},null,512),[[m,c.value.city]])]),s("div",ks,[t[32]||(t[32]=s("label",{class:"form-label",for:"department"},"Departamento *",-1)),n(s("input",{id:"department","onUpdate:modelValue":t[9]||(t[9]=e=>c.value.department=e),type:"text",class:"form-input",placeholder:"Magdalena",required:""},null,512),[[m,c.value.department]])])]),s("div",hs,[t[33]||(t[33]=s("label",{class:"form-label",for:"notes"},"Notas adicionales",-1)),n(s("textarea",{id:"notes","onUpdate:modelValue":t[10]||(t[10]=e=>c.value.notes=e),class:"form-input form-textarea",placeholder:"Indicaciones especiales para la entrega...",rows:"3"},null,512),[[m,c.value.notes]])])])):_("",!0),s("div",{class:"step-actions"},[s("button",{type:"button",onClick:I,class:"btn btn-outline btn-lg"},t[35]||(t[35]=[s("span",{class:"btn-icon"},"‚Üê",-1),s("span",{class:"btn-text"},"Atr√°s",-1)])),t[36]||(t[36]=s("button",{type:"submit",class:"btn btn-primary btn-lg"},[s("span",{class:"btn-text"},"Continuar"),s("span",{class:"btn-icon"},"‚Üí")],-1))])],32)])):_("",!0),u.value===3?(p(),d("div",xs,[t[43]||(t[43]=s("h2",{class:"step-title"},"M√©todo de Pago",-1)),s("form",{onSubmit:C(D,["prevent"]),class:"checkout-form"},[s("div",Ns,[s("div",{class:g(["payment-option",{selected:f.value==="cash"}])},[s("label",Cs,[n(s("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>f.value=e),type:"radio",value:"cash",class:"option-radio"},null,512),[[x,f.value]]),s("div",ws,[t[38]||(t[38]=s("span",{class:"option-icon"},"üíµ",-1)),t[39]||(t[39]=s("span",{class:"option-title"},"Pago en Efectivo",-1)),s("p",Ps,l(a.value==="pickup"?"Paga al recoger en tienda":"Paga contra entrega"),1)])])],2),s("div",{class:g(["payment-option",{selected:f.value==="transfer"}])},[s("label",Ss,[n(s("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>f.value=e),type:"radio",value:"transfer",class:"option-radio"},null,512),[[x,f.value]]),t[40]||(t[40]=s("div",{class:"option-content"},[s("span",{class:"option-icon"},"üè¶"),s("span",{class:"option-title"},"Transferencia Bancaria"),s("p",{class:"option-description"}," Te enviaremos los datos bancarios por WhatsApp ")],-1))])],2)]),s("div",Is,[t[41]||(t[41]=s("h3",{class:"notes-title"},"Comentarios adicionales",-1)),n(s("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>N.value=e),class:"form-input form-textarea",placeholder:"¬øAlguna solicitud especial? Cu√©ntanos aqu√≠...",rows:"3"},null,512),[[m,N.value]])]),s("div",Vs,[s("button",{type:"button",onClick:I,class:"btn btn-outline btn-lg"},t[42]||(t[42]=[s("span",{class:"btn-icon"},"‚Üê",-1),s("span",{class:"btn-text"},"Atr√°s",-1)])),s("button",{type:"submit",disabled:h.value,class:"btn btn-primary btn-lg complete-order-btn"},[h.value?(p(),d("span",Es,"‚è≥")):(p(),d("span",qs,"‚úÖ")),s("span",Us,l(h.value?"Procesando...":"Confirmar Pedido"),1)],8,Ts)])],32)])):_("",!0)]),s("div",Rs,[s("div",$s,[t[49]||(t[49]=s("h3",{class:"summary-title"},"Resumen del Pedido",-1)),s("div",Ds,[(p(!0),d(L,null,j(v(w),e=>(p(),d("div",{key:e.id,class:"summary-item"},[s("div",As,[s("img",{src:e.product.images[0]||"/placeholder-product.jpg",alt:e.product.name},null,8,Ms)]),s("div",zs,[s("h4",Bs,l(e.product.name),1),s("p",Fs,[e.selectedColor?(p(),d("span",Gs,l(e.selectedColor),1)):_("",!0),e.selectedSize?(p(),d("span",Os,l(e.selectedSize),1)):_("",!0)]),s("p",Ls,"Cantidad: "+l(e.quantity),1)]),s("div",js," $"+l(b(e.product.price*e.quantity)),1)]))),128))]),s("div",Js,[s("div",Ws,[t[44]||(t[44]=s("span",{class:"total-label"},"Subtotal:",-1)),s("span",Hs,"$"+l(b(v(o).subtotal)),1)]),v(o).discount>0?(p(),d("div",Ks,[t[45]||(t[45]=s("span",{class:"total-label"},"Descuentos:",-1)),s("span",Qs,"-$"+l(b(v(o).discount)),1)])):_("",!0),s("div",Xs,[s("span",Ys,l(a.value==="pickup"?"Recoger en tienda:":"Env√≠o:"),1),s("span",Zs,l(a.value==="pickup"||v(o).shipping===0?"GRATIS":`$${b(v(o).shipping)}`),1)]),s("div",st,[t[46]||(t[46]=s("span",{class:"total-label"},"IVA (19%):",-1)),s("span",tt,"$"+l(b(v(o).tax)),1)]),t[48]||(t[48]=s("div",{class:"total-divider"},null,-1)),s("div",et,[t[47]||(t[47]=s("span",{class:"total-label"},"Total a pagar:",-1)),s("span",ot,"$"+l(b(P.value)),1)])])])])])])]))}}),rt=W(at,[["__scopeId","data-v-bd12322e"]]);export{rt as default};
//# sourceMappingURL=Checkout-D1i-hzrw.js.map
